<configuration>
  <weiflow>
    <node id="1" preid="-1">testShell</node>
    <node id="2" preid="1">GenFeatureConf</node>
  </weiflow>
  <nodes>
     <node name="testShell">
      <env>
        <var>SPARK_HOME=/usr/local/spark2.1.0</var>
        <var>SCALA_HOME=/usr/local/scala2.11.5</var>
      </env>
      <runtime name="com.weibo.datasys.engine.shell.node.NodeShellImpl">
        <binPath>/bin/bash</binPath>
      </runtime>
      <execute>
        <type>pipeline</type>
      </execute>
       <process name="process1">
        <className>com.weibo.datasys.engine.shell.process.ProcessShellCmd</className>
        <shell>echo 'hello world'</shell>
        <script>./weiclient/echoHello.sh</script>
      </process>
    </node>
    <node name="GenFeatureConf">
      <env>
        <var>SPARK_HOME=/usr/local/spark2.1.0</var>
        <var>SCALA_HOME=/usr/local/scala2.11.5</var>
      </env>
      <runtime name="com.weibo.datasys.engine.spark.node.NodeSparkImpl">
        <binPath>spark-submit</binPath>
        <sparkArgs>
          --master local
          --deploy-mode client
          --num-executors 5
          --executor-cores 2
          --executor-memory 8g
          --driver-memory 10g
        </sparkArgs>
      </runtime>
      <execute>
        <type>pipeline</type>
      </execute>
      <input name="input2">
        <className>com.weibo.datasys.engine.spark.input.InputSparkDataConf</className>
        <dataPath>./weiclient/push.data.conf</dataPath>
      </input>
      <output name="output2">
        <className>com.weibo.datasys.engine.spark.output.OutputSparkFeatureConf</className>
        <dependency>input2</dependency>
        <dataPath>./weiclient/feature.conf.test</dataPath>
      </output>
    </node>
   </nodes>
</configuration>
